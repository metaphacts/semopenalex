<style>
  .card-group {
    border-radius: 10px;
    box-shadow: 0 0 5px 4px rgb(0 0 0 / 12%);
    padding: 20px;
  
  }

  .card-group:hover {
    box-shadow: 0 0 14px 10px rgb(0 0 0 / 12%);
  }

  .card-body {
    flex: 1 1 auto;
    //height: 100px;
    overflow: hidden;
    padding: 16px;
  }

  .nav-tabs .nav-link.active {
      background-color: #fafbfd;
      box-shadow: 1px -1px 6px 0 #0000004d;
  }
  .nav-tabs {
      border-bottom: 1px solid #cacaca;
  }
  .page__body__wide {
      flex: 0 0 93.33333333%;
      max-width: 93.33333333%;
      margin-left: 3%;
      margin-top:50px;
  }

  .highcharts-legend{
    display: none;
  }

  .semantic-search__class-selector-item {
      margin-right: 8px;
  }

  .knowledge-panel-frame{
    width:none!important;
  }
  .InlineDisambiguation--inputGroup {
    padding: 48px;
    width: 922px;
    height: 128px;
    top:0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    background: #ECF0F6;
    border-radius: 8px;
  }
  
</style>


<div class="page soa">
  <div style='padding: 10px'>

    <div style='margin-top: 16px'>
      {{>::sample-keyword-type-search}}
    </div>
             
  </div>

</div>


<template-fragment export id='sample-keyword-type-search'>

   <semantic-search id='sem-open-alex-search'
      categories='{
        "<http://www.w3.org/2004/02/skos/core#Concept>": [{
        "kind": "hierarchy",
        "queryPattern": "$subject ?__relation__ ?__value__",
        "resultPattern": "
            $subject ?__relation__ ?hierarchyLeaf .
            ?hierarchyLeaf skos:broader* ?__value__ .
          ",
        "treePatterns": {
          "kind": "simple",
          "relationPattern": "?item <http://www.w3.org/2004/02/skos/core#broader> ?parent"
          }
        }]
      }'
      relations='{
        "<http://semopenalex.org/host-venue-placeholder>": [{
          "kind": "resource",
          "queryPattern": "{ $subject <https://semopenalex.org/property/hasHostVenue>/<https://semopenalex.org/property/hasVenue> ?__value__ . }"
        }],
         "<http://semopenalex.org/host-venue-placeholder-inverse>": [{
          "kind": "resource",
          "queryPattern": "{ $subject ^(<https://semopenalex.org/property/hasHostVenue>/<https://semopenalex.org/property/hasVenue>) ?__value__ . }"
        }],
         "<http://semopenalex.org/has-concept-placeholder-inverse>": [{
          "kind": "resource",
          "queryPattern": "{ $subject ^<https://semopenalex.org/property/hasConcept> ?__value__ . }"
        }],
        "<http://semopenalex.org/has-member-placeholder>": [{
          "kind": "resource",
          "queryPattern": "{ $subject ^<http://www.w3.org/ns/org#memberOf> ?__value__ . }"
        }],
         "<http://semopenalex.org/author-work-placeholder>": [{
          "kind": "resource",
          "queryPattern": "{ ?__value__  <https://semopenalex.org/property/hasAuthorPosition> / <https://semopenalex.org/property/hasAuthor> $subject . }"
        }]

      }'


      search-profile='{
        "categories": [
        {
          "iri": "<https://semopenalex.org/class/Author>",
          "label": "Author"
         
        },
        {
          "iri": "<https://semopenalex.org/class/Work>",
          "label": "Work"
        
        }, {
          "iri": "<https://semopenalex.org/class/Author>",
          "label": "Author"
        
        }, {
          "iri": "<https://semopenalex.org/class/Venue>",
          "label": "Venue"
         
        }, {
        	"iri": "<https://semopenalex.org/class/Institution>",
          "label": "Institution"
         
        }, {
        	"iri": "<http://www.w3.org/2004/02/skos/core#Concept>",
          "label": "Concept"
         
        }
      
        
        ],
        "relations": [
          {  
            "hasDomain": "<https://semopenalex.org/class/Work>",
            "iri": "<http://purl.org/dc/terms/creator>",
            "hasRange": "<https://semopenalex.org/class/Author>",
            "label": "creator"
          },
          {
            "hasDomain": "<https://semopenalex.org/class/Work>",
            "iri": "<https://semopenalex.org/property/hasConcept>",
            "hasRange": "<http://www.w3.org/2004/02/skos/core#Concept>",
            "label": "has Topic",
            "inverse": {
              "iri": "<http://semopenalex.org/has-concept-placeholder-inverse>",
              "label": "topic is applied by"
            }
          }, {
            "hasDomain": "<https://semopenalex.org/class/Author>",
            "iri": "<http://www.w3.org/ns/org#memberOf>",
            "hasRange": "<https://semopenalex.org/class/Institution>",
            "label": "memberOf",
            "inverse":{
                "iri": "<http://semopenalex.org/has-member-placeholder>",
                "label": "has member"
            }
          },
           {
            "hasDomain": "<https://semopenalex.org/class/Work>",
            "iri": "<http://semopenalex.org/host-venue-placeholder>",
            "hasRange": "<https://semopenalex.org/class/Venue>",
            "label": "hasHostVenue",
            "inverse": {
              "iri": "<http://semopenalex.org/host-venue-placeholder-inverse>",
              "label": "host Venue Of"
            }
          }, {
            "hasDomain": "<https://semopenalex.org/class/Work>",
            "iri": "<http://prismstandard.org/namespaces/basic/2.0/publicationDate>",
            "hasRange": "<http://www.w3.org/2001/XMLSchema#dateTime>",
            "label": "publication date"
          }, {
            "hasDomain": "<https://semopenalex.org/class/Work>",
            "iri": "<https://semopenalex.org/property/hasRelatedWork>",
            "hasRange": "<https://semopenalex.org/class/Work>",
            "label": "has related work"
          }, {
            "hasDomain": "<https://semopenalex.org/class/Institution>",
            "iri": "<https://semopenalex.org/property/hasAssociatedInstitution>",
            "hasRange": "<https://semopenalex.org/class/Institution>",
            "label": "has associated institution"
          }, {
            "hasDomain": "<http://www.w3.org/2004/02/skos/core#Concept>",
            "iri": "<http://www.w3.org/2004/02/skos/core#related>",
            "hasRange": "<http://www.w3.org/2004/02/skos/core#Concept>",
            "label": "has related topic"
          }, {
            "hasDomain": "<https://semopenalex.org/class/Author>",
            "iri": "<http://semopenalex.org/author-work-placeholder>",
            "hasRange": "<https://semopenalex.org/class/Work>",
            "label": "author work"
          }
        ]
      }'>


        <semantic-search-query-keyword-type id='keywordTypeQuery1'
          token-pattern='SERVICE Repository:lookup {
            ?subject lookup:token ?__token__  .
            ?subject lookup:limit 10000 .
            ?subject lookup:type ?__domain__ .
          }'
          default-query='SELECT ?subject WHERE {
            ?subject a ?__domain__ . 
          } LIMIT 100'
          default-count-query='
            PREFIX sys: <http://www.ontotext.com/owlim/system#>
            SELECT (COUNT (*) as ?count) FROM sys:statistics {    
              ?subject a ?__domain__
            }
          '
          count-query-mode='queryPerCategory'
          template='{{> tmpl}}'
          inline-suggest="true"
          suggestion-limit="10"
          suggestion-template="{{> suggestion}}"
          placeholder='Search works, authors, concepts etc.'
      
        >
          <template id='tmpl'>
            {{>::count-template}}
          </template>
          <template id="suggestion">
            
             {{#switch kind}}
              {{#case 'search' break=true}}
          
               
                  <div class='InlineDisambiguation--search'>
                    Show results overview for "<span class='InlineDisambiguation--searchTerm'>{{searchTerm}}</span>"
                  </div>
            
              {{/case}}
              {{#case 'group' break=true}}
                <div class='InlineDisambiguation--group' title='{{domain.iri}}'>
                  {{domain.label}}
                </div>
              {{/case}}
              {{#case 'resource' break=true}}
                <div class='InlineDisambiguation--resource' title='{{resource.iri}}'>
                  <mp-highlight highlight='{{searchTerm}}'>{{resource.label}}</mp-highlight> 

                  {{#if (cond-eq domain.label 'Author')}}
                    <div>
                      {{>::disambiguation-author-extra-info}}
                    </div>
                  {{/if}}
                  {{#if (cond-eq domain.label 'Work')}}
                    <div>
                      {{>::disambiguation-work-extra-info}}
                    </div>
                  {{/if}}
                  {{#if (cond-eq domain.label 'Institution')}}
                    <div>
                      {{>::disambiguation-institution-extra-info}}
                    </div>
                  {{/if}}
                  {{#if (cond-eq domain.label 'Venue')}}
                    <div>
                      {{>::disambiguation-venue-extra-info}}
                    </div>
                  {{/if}}

                </div>
              {{/case}}
            {{/switch}}
          </template>

        </semantic-search-query-keyword-type>

        {{>::search-result-holders}}
      
    </semantic-search>
</template-fragment>

<template-fragment id='disambiguation-author-extra-info'>
  <semantic-query query='SELECT * { <{{resource.iri}}> ^<http://purl.org/dc/terms/creator>/<https://semopenalex.org/property/hasConcept> ?obj } LIMIT 5' template='{{> tmpl}}'>
    <template id='tmpl'>
       Author in
      {{#each bindings}}
          <semantic-link iri={{obj.value}}></semantic-link>
           {{#if @last}}{{else}}, {{/if}}
      {{/each}}
    </template>
  </semantic-query>
</template-fragment>

<template-fragment id='disambiguation-work-extra-info'>
  <semantic-query query='SELECT * { <{{resource.iri}}> <https://semopenalex.org/property/hasConcept> ?obj } LIMIT 5' template='{{> tmpl}}'>
    <template id='tmpl'>
       Work in
      {{#each bindings}}
          <semantic-link iri={{obj.value}}></semantic-link>
           {{#if @last}}{{else}}, {{/if}}
      {{/each}}
    </template>
  </semantic-query>
</template-fragment>

<template-fragment id='disambiguation-institution-extra-info'>
  <semantic-query query='SELECT * { 
    <{{resource.iri}}> <https://dbpedia.org/ontology/location>/<https://dbpedia.org/property/city> ?city .
    <{{resource.iri}}> <https://dbpedia.org/ontology/location>/<https://dbpedia.org/property/country> ?country .
  } ' template='{{> tmpl}}'>
    <template id='tmpl'>
       Institution location in
      {{#each bindings}}
          {{#if city}}
            <span>{{city.value}}</span>
          {{/if}}
          {{#if country}}
            <span>, {{country.value}}</span>
          {{/if}}
      {{/each}}
    </template>
  </semantic-query>
</template-fragment>

<template-fragment id='disambiguation-venue-extra-info'>
  <semantic-query query='SELECT * { 
    <{{resource.iri}}> ^<https://semopenalex.org/property/hasVenue>/<http://purl.org/spar/fabio/hasURL> ?url .
    optional { <{{resource.iri}}> <http://purl.org/dc/terms/publisher> ?publisher }
  } LIMIT 1' template='{{> tmpl}}'>
    <template id='tmpl'>
       Venue:
      {{#each bindings}}
          {{#if url}}
            <span>URL: {{url.value}}</span>
          {{/if}}
          {{#if publisher}}
            <span> Publisher: {{publisher.value}}</span>
          {{/if}}
      {{/each}}
    </template>
  </semantic-query>
</template-fragment>

<template-fragment id='count-template'>
  {{log this}}
  <div style='text-align: center; margin-top: 16px; font-size:14px;'>
    SemOpenAlex is a <semantic-link iri='http://www.metaphacts.com/resource/assets/Datasets'>dataset</semantic-link> about scientific publications presented in the form of a knowledge graph with approximately 28.3 billion statements.
  </div>
  <div style='margin: 16px;'>
    {{#if (cond-and (cond-gt searchTerm.length 2) (cond-eq loadingCounts false) (cond-eq selectedDomain undefined))}}
      <div class="header__title-main">
        Overview: "{{searchTerm}}"
      </div>
    {{/if}}
    {{#if selectedDomain}}
      <div class='KeywordTypeQuery--domainCards'>
      <div data-flex-layout='rows stretch-stretch'>
        {{#each domains}}
          {{#if (cond-gt count 0)}}
            <div data-flex-self='size-1of5 md-half sm-full' class='KeywordTypeQuery--domainCardItem'>
        
              <mp-event-trigger
                type='KeywordTypeQuery.SelectDomain'
                targets='["{{../componentId}}"]'
                data='{"domainIri": "{{iri}}"}'>

                <button class='btn btn-secondary KeywordTypeQuery--domainCard {{#if selected}}KeywordTypeQuery--domainCard--selected{{/if}}' style='background: #F9F8F6'>
                  <div class='KeywordTypeQuery--domainCardThumbnail p-3'>
                    {{#if thumbnail}}
                      <img src='{{thumbnail}}' style='height:40px;' alt='{{label}}' />&nbsp;
                    {{/if}}
                  </div>
                  
                  {{#if count}}
                    <span class='h5'>{{number-format count notation='compact' compactDisplay='long'}}</span>
                  {{/if}}
                  <span class='h4' style='color: #205BAC; {{#if selected}}border-bottom: 2px solid{{/if}}' class='header__title-sub'>{{label}}</span>
                  {{#if ../loadingCounts}}<span class='h5'>⏳</span>{{/if}}
                </button>
                
              </mp-event-trigger>
           
            </div>
          {{/if}}
        {{/each}}
      </div>
      </div>
      <div style='display: flex;'>
        <mp-event-trigger type='KeywordTypeQuery.ClearSearch' targets='["{{componentId}}"]'>
          <a style='margin-left:auto; padding:4px'><i class='fa fa-trash'></i> Clear</a>
        </mp-event-trigger>
      </div>
    {{else}}
      <div class='KeywordTypeQuery--domainCards'>
        <div data-flex-layout='rows stretch-stretch'>
          {{#each domains}}
            {{#ifCond count "||" ../loadingCounts}}
              <div data-flex-self='size-1of5 md-half sm-full' class='KeywordTypeQuery--domainCardItem'>
                <mp-event-trigger type='KeywordTypeQuery.SelectDomain' targets='["{{../componentId}}"]' data='{"domainIri": "{{iri}}"}'>
                  <button class='btn btn-secondary KeywordTypeQuery--domainCard {{#if selected}}KeywordTypeQuery--domainCard--selected{{/if}}' style='background: #F9F8F6'>
                    <div class='KeywordTypeQuery--domainCardThumbnail p-3'>
                      {{#if thumbnail}}
                        <img src='{{thumbnail}}' style='height:40px;' alt='{{label}}' />&nbsp;
                      {{/if}}
                    </div>
                  
                    {{#if count}}
                  
                      <span class='h5'>{{number-format count notation='compact' compactDisplay='long'}}</span>
                    {{/if}}
                    
                    <span class='h4' style='color: #205BAC' class='header__title-sub'>{{label}}</span>
                    {{#if ../loadingCounts}}<span class='h5'>⏳</span>{{/if}}

                  </button>
                </mp-event-trigger>
              </div>
            {{/ifCond}}
          {{/each}}
        </div>
      </div>

    

      {{#if (cond-and (cond-gt searchTerm.length 2) (cond-eq loadingCounts false) (cond-eq selectedDomain undefined))}}
        {{#each domains}}    
          {{>::search-overview searchTerm=../searchTerm}}
        {{/each}}
      {{/if}}
       
    {{/if}}
  </div>

</template-fragment>


<template-fragment id='search-overview'>
  
    <semantic-query query='
      PREFIX lookup: <http://www.metaphacts.com/ontologies/platform/repository/lookup#>
      PREFIX Repository: <http://www.metaphacts.com/ontologies/repository#>
      SELECT DISTINCT ?subject ?iri WHERE {
        SERVICE Repository:lookup {
          ?subject lookup:token "{{searchTerm}}";
            lookup:limit 6 ;
            lookup:type <{{iri}}> .
        }
      }' template='{{> tmpl}}'>

      <template id='tmpl'>
        {{#if (cond-eq iri 'https://semopenalex.org/class/Work')}}
          {{#if (cond-gt bindings.length 0)}}
            {{>::overview-publications mode='work'}}
          {{/if}}
        {{/if}}
        {{#if (cond-eq iri 'https://semopenalex.org/class/Author')}}
          {{#if (cond-gt bindings.length 0)}}
            {{>::overview-publications mode='author'}}
          {{/if}}
        {{/if}}
        {{#if (cond-eq iri 'https://semopenalex.org/class/Venue')}}
          {{#if (cond-gt bindings.length 0)}}
            {{>::overview-publications mode='venue'}}
          {{/if}}
        {{/if}}
        {{#if (cond-eq iri 'https://semopenalex.org/class/Institution')}}
          {{#if (cond-gt bindings.length 0)}}
            {{>::overview-publications mode='institution'}}
          {{/if}}
        {{/if}}
        {{#if (cond-eq iri 'http://www.w3.org/2004/02/skos/core#Concept')}}
          {{#if (cond-gt bindings.length 0)}}
            {{>::overview-publications mode='concept'}}
          {{/if}}
        {{/if}}
      </template>
    </semantic-query>

</template-fragment>

<template-fragment id="overview-publications">
  <div class="row card publications" style='margin:8px'>
    <mp-event-target-template-render id="publications" template='{{>tmp}}'>
      <template id="tmp">
        <div class="publications__header">
          <div class="card__title">
            {{#if (cond-eq mode "work")}}
              WORKS
            {{/if}}
            {{#if (cond-eq mode "author")}}
              AUTHORS
            {{/if}}
            {{#if (cond-eq mode "venue")}}
              VENUES
            {{/if}}
            {{#if (cond-eq mode "institution")}}
              INSTITUTIONS
            {{/if}}
            {{#if (cond-eq mode "concept")}}
              CONCEPTS
            {{/if}}
          </div>
          <div class="buttons">
            <mp-event-trigger type='Component.TemplateUpdate' data='{"sort":"DESC (?cited)", "all": "{{all}}"}' targets='["publications"]'>
              <button class='{{#unless sort}}selected{{/unless}}{{#ifCond sort "===" "DESC (?cited)"}}selected{{/ifCond}}'>Most cited</button>
            </mp-event-trigger>
            <mp-event-trigger type='Component.TemplateUpdate' data='{"sort":"DESC (?publicationYear)", "all": "{{all}}"}' targets='["publications"]'>
              <button class='{{#ifCond sort "===" "DESC (?publicationYear)"}}selected{{/ifCond}}'>Latest</button>
            </mp-event-trigger>
          </div>
        </div>
          <semantic-table query=
            'SELECT ?title ?publication ?cited ?publicationYear ?publisher ?volume ?issue (group_concat(DISTINCT ?name; separator = ", ") as ?authors) WHERE {
              {{#if (cond-eq mode "work")}}
                VALUES ?publication {
                  {{#each bindings}}
                    <{{subject.value}}>
                  {{/each}}
                }
              {{/if}}
              {{#if (cond-eq mode "author")}}
                VALUES ?author {
                  {{#each bindings}}
                    <{{subject.value}}>
                  {{/each}}
                }
              {{/if}}

              {{#if (cond-eq mode "venue")}}
                 {
                  SELECT ?publication WHERE {
                    VALUES ?venue {
                      {{#each bindings}}
                        <{{subject.value}}>
                      {{/each}}
                    }
                    ?hostVenue <https://semopenalex.org/property/hasVenue> ?venue .
                    ?publication <https://semopenalex.org/property/hasHostVenue> ?hostVenue . 
                  } LIMIT 10
                }
              {{/if}}
              {{#if (cond-eq mode "institution")}}
                {
                  SELECT ?publication WHERE {
                  VALUES ?institution {
                    {{#each bindings}}
                      <{{subject.value}}>
                    {{/each}}
                  }
                  ?member <http://www.w3.org/ns/org#memberOf> ?institution .
                  ?publication <http://purl.org/dc/terms/creator> ?member .
                  } LIMIT 10
                  
                }
              {{/if}}

              {{#if (cond-eq mode "concept")}}
                {
                  SELECT ?publication WHERE {
                    VALUES ?concept {
                      {{#each bindings}}
                        <{{subject.value}}>
                      {{/each}}
                    }
                    ?publication <https://semopenalex.org/property/hasConcept> ?concept .  
                  } LIMIT 10
                }
              {{/if}}
             
              ?publication <http://purl.org/dc/terms/creator> ?author . 
              ?publication <http://purl.org/dc/terms/title> ?title .
              ?author <http://xmlns.com/foaf/0.1/name> ?name .
              ?publication <https://semopenalex.org/property/citedByCount> ?cited .
              OPTIONAL {
                ?publication <https://semopenalex.org/property/hasHostVenue> ?hostVenue .
                ?hostVenue <https://semopenalex.org/property/hasVenue> ?venue .
                ?venue <http://purl.org/dc/terms/publisher> ?publisher .
              }
              OPTIONAL {
                ?publication <https://semopenalex.org/property/hasVolume> ?volume .
              }
              OPTIONAL {
                ?publication <https://semopenalex.org/property/hasIssue> ?issue .
              }
              OPTIONAL {
                ?publication <http://purl.org/spar/fabio/hasPublicationYear> ?publicationYear .  
              }
              filter (?publication != <{{page-resource}}>) .
            } 
            GROUP BY ?title ?publication ?publicationYear ?cited ?publisher ?volume ?issue
            ORDER BY {{#if sort}}{{sort}}{{else}}DESC(?cited){{/if}}
            {{#unless all}}LIMIT 10{{/unless}}
            ' number-of-displayed-rows="10" tuple-template='
              <div class="publication">
                <div class="publication__top">
                  <semantic-link iri="{{publication.value}}">
                    <div class="publication__title">{{title.value}}</div>
                  </semantic-link>
                  <div class="publication__author" style="width: 100%;">
                    <mp-text-truncate truncate="..." style="width: inherit;">
                      By {{authors.value}}
                    </mp-text-truncate>
                  </div>
                  <div class="publication__info">
                    {{#if publisher}}{{publisher.value}}, {{/if}}
                    {{#if volume}}Volume {{volume.value}}, {{/if}}
                    {{#if issue}}Issue {{issue.value}}, {{/if}}
                    {{publicationYear.value}}
                  </div>
                </div>
                <div class="publication__bottom">
                  <div class="publication__year">{{publicationYear.value}}</div>
                  <div class="publication__citation">
                    <div class="publication__citation-icon"></div>
                    <div class="publication__citation-value">{{cited.value}}</div>
                  </div>
                </div>
              </div>
          ' options='{"showFilter":false}'></semantic-table>
          
      </template>
    </mp-event-target-template-render>
  </div>
</template-fragment>

<template-fragment id='search-result-holders'>

  <semantic-search-facet-store id="facet" values-limit='10000' 
    default-resource-pattern='
      SELECT ?value (COUNT(DISTINCT $subject) AS ?count) WHERE {
        { SELECT DISTINCT ?value ?subject { 
          FILTER(?__facetRelationPattern__)
        } LIMIT 10001 }
    } GROUP BY ?value'
    default-literal-pattern='
      SELECT ?literal (COUNT(DISTINCT $subject) AS ?count) WHERE {
        { SELECT DISTINCT ?literal ?subject { 
          FILTER(?__facetRelationPattern__)
        } LIMIT 10001 }
    } GROUP BY ?literal
    '
  >
  </semantic-search-facet-store>
  <div style='display: flex;'>
    
    <div style='flex: 0.33;'>
      <semantic-search-facet-group expand-result-context='false' allow-multiple-open='true' default-settings='{"headerTemplate": "{{> headerTemplate}}"}'>
        <template id='headerTemplate'>
          <div class='SemanticSearchFacet--relationHeader'>{{$relation.label.value}}
          {{#if $range.label}}
             <span class="pull-right">{{$range.label.value}}</span> 
          {{/if}}
          </div>

        </template>
    
      </semantic-search-facet-group>   
    </div>

    <semantic-search-result-holder>
     
      <div style='flex: 1;'>
        <semantic-search-facet-breadcrumbs></semantic-search-facet-breadcrumbs>
              
            <semantic-search-result-context
              multi=true
            >
            <semantic-search-result>
              <semantic-search-table-result>

                <div data-flex-layout='row stretch-stretch'>
    	            <div data-flex-self='md-full'>
                    <semantic-table
                      id="results-table"
                      query='SELECT DISTINCT ?subject WHERE { FILTER(?__contextRelationPattern__) }'
                      options='{
                        "showFilter":false,
                        "showNumberOfRows": true,
                        "enableGrouping": false,
                        "groupingOptions": {
                            "groupedBy": ["subject"], 
                            "showOnlyAggregatedValue": true, 
                            "defaultAggregation":"concat"
                        }
                      }'
                                                         
                      column-configuration='[{
                          "variableName": "subject",
                          "cellTemplate": "{{> subjectTemplate iri=subject.value}}"
                      }]'
                    >
                       
                      <template id='subjectTemplate'>
                        <mp-knowledge-panel-trigger iri='{{iri}}'></mp-knowledge-panel-trigger>
                      </template>
                      
                    </semantic-table>
                  </div>
                  <mp-knowledge-panel-frame></mp-knowledge-panel-frame>
                </div>
              </semantic-search-table-result>
            </semantic-search-result> 
            </semantic-search-result-context>
      </div> 
    </semantic-search-result-holder>
  </div>
</template-fragment>


<template-fragment id='work-abstract'>
  <semantic-query query='SELECT ?abstract WHERE { <{{subject.value}}> <http://purl.org/dc/terms/abstract> ?abstract }' template='{{> tmpl}}'>
    <template id='tmpl'>
      {{#each bindings}}
        {{#if abstract.value}}
         
          <mp-text-truncate lines="3" expand="{{> expand}}" collapse="{{> collapse}}">
            <template id="expand"><span style="color: gray;">...<a>read more</a></span></template>
            <template id="collapse"><span style="color: gray;">(<a>show less</a>)</span></template>
              Abstract:  {{abstract.value}}
          </mp-text-truncate>
        {{/if}}
      {{/each}}
      </template>
  </semantic-query>
</template-fragment>

<template-fragment id='work-creator'>
   <semantic-query query='SELECT ?author WHERE { <{{subject.value}}> <http://purl.org/dc/terms/creator> ?author }' template='{{> tmpl}}'>
    <template id='tmpl'>
      {{#each bindings}}
        {{#if author.value}}
          
              <div style='margin-bottom:3px'>
                <img src='/assets/images/writer.png' style='height:20px;' alt='{{label}}' />&nbsp;
                <semantic-link iri='{{author.value}}'></semantic-link><br>
              </div>
        
        {{/if}}
      {{/each}}
      </template>
  </semantic-query>
</template-fragment>


<template-fragment id='work-publication-date'>
   <semantic-query query='SELECT ?pubDate WHERE { <{{subject.value}}> <http://prismstandard.org/namespaces/basic/2.0/publicationDate> ?pubDate }' template='{{> tmpl}}'>
    <template id='tmpl'>
      {{#each bindings}}
        {{#if pubDate.value}}
          
            Publication Date: {{pubDate.value}}
        
        {{/if}}
      {{/each}}
      </template>
  </semantic-query>
</template-fragment>

<template-fragment id='concept-note'>
   <semantic-query query='SELECT ?note WHERE { <{{subject.value}}> <http://www.w3.org/2004/02/skos/core#note> ?note }' template='{{> tmpl}}'>
    <template id='tmpl'>
      {{#each bindings}}
       
          <mp-text-truncate lines="3" expand="{{> expand}}" collapse="{{> collapse}}">
            <template id="expand"><span style="color: gray;">...<a>read more</a></span></template>
            <template id="collapse"><span style="color: gray;">(<a>show less</a>)</span></template>
              Note:  {{note.value}}
          </mp-text-truncate>
        
       
        
       
      {{/each}}
      </template>
  </semantic-query>

</template-fragment>

